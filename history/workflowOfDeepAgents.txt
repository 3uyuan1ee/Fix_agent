Deep Agents å·¥ä½œæµå®šåˆ¶èƒ½åŠ›æ·±åº¦åˆ†æ

  ğŸ¯ æ ¸å¿ƒç­”æ¡ˆï¼šæ”¯æŒï¼Œä½†æœ‰å±‚æ¬¡

  Deep Agents ç¡®å®æ”¯æŒè‡ªå®šä¹‰å·¥ä½œæµï¼Œä½†ä¸»è¦æ˜¯åœ¨ç‰¹å®šå±‚æ¬¡ä¸Šã€‚å®ƒä¸æ˜¯ä¼ ç»Ÿçš„å›¾å½¢åŒ–
  å·¥ä½œæµç¼–è¾‘å™¨ï¼Œè€Œæ˜¯é€šè¿‡ä¸­é—´ä»¶ç³»ç»Ÿå’Œå­ä»£ç†æ¶æ„æ¥å®ç°å¼ºå¤§çš„å·¥ä½œæµå®šåˆ¶èƒ½åŠ›ã€‚

  ğŸ”„ æ”¯æŒçš„å·¥ä½œæµå®šåˆ¶ç±»å‹

  1. å­ä»£ç†å·¥ä½œæµ â­â­â­â­â­

  é€šè¿‡å®šä¹‰ä¸“é—¨çš„å­ä»£ç†æ¥å®ç°å¤æ‚çš„å¤šé˜¶æ®µä»»åŠ¡ï¼š

  # å¤šé˜¶æ®µæ•°æ®å¤„ç†å·¥ä½œæµ
  data_collector = {
      "name": "data_collector",
      "description": "æ”¶é›†åŸå§‹æ•°æ®",
      "system_prompt": "ä½¿ç”¨æœç´¢å·¥å…·æ”¶é›†ç›¸å…³æ•°æ®",
      "tools": [search_tool, scrape_tool],
  }

  data_cleaner = {
      "name": "data_cleaner",
      "description": "æ¸…æ´—å’Œæ ¼å¼åŒ–æ•°æ®",
      "system_prompt": "æ¸…æ´—æ•°æ®å¹¶è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼",
      "tools": [process_tool, validate_tool],
  }

  data_analyzer = {
      "name": "data_analyzer",
      "description": "åˆ†æå¤„ç†åçš„æ•°æ®",
      "system_prompt": "å¯¹æ•°æ®è¿›è¡Œæ·±åº¦åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Š",
      "tools": [analyze_tool, visualize_tool],
  }

  agent = create_deep_agent(
      subagents=[data_collector, data_cleaner, data_analyzer],
      system_prompt="æŒ‰é¡ºåºæ‰§è¡Œï¼šæ”¶é›†â†’æ¸…æ´—â†’åˆ†æ"
  )

  2. çŠ¶æ€é©±åŠ¨å·¥ä½œæµ â­â­â­â­

  åŸºäºçŠ¶æ€å˜åŒ–æ¥æ§åˆ¶å·¥ä½œæµæµå‘ï¼š

  class AdaptiveWorkflowMiddleware(AgentMiddleware):
      def wrap_model_call(self, request, handler):
          state = request.get("state", {})
          current_stage = state.get("workflow_stage", "planning")

          if current_stage == "planning":
              request.system_prompt += " å½“å‰é˜¶æ®µï¼šä»»åŠ¡è§„åˆ’"
          elif current_stage == "execution":
              request.system_prompt += " å½“å‰é˜¶æ®µï¼šæ‰§è¡Œä»»åŠ¡"
          elif current_stage == "review":
              request.system_prompt += " å½“å‰é˜¶æ®µï¼šè´¨é‡æ£€æŸ¥"

          return handler(request)

  3. æ¡ä»¶åˆ†æ”¯å·¥ä½œæµ â­â­â­

  é€šè¿‡å­ä»£ç†é€‰æ‹©å®ç°æ¡ä»¶é€»è¾‘ï¼š

  conditional_subagents = [
      {
          "name": "research_branch",
          "description": "å½“éœ€è¦æ·±å…¥ç ”ç©¶æ—¶ä½¿ç”¨",
          "system_prompt": "ä½ æ˜¯ä¸“ä¸šç ”ç©¶å‘˜",
          "tools": [research_tools],
      },
      {
          "name": "coding_branch",
          "description": "å½“éœ€è¦ä»£ç ç¼–å†™æ—¶ä½¿ç”¨",
          "system_prompt": "ä½ æ˜¯ä¸“ä¸šç¨‹åºå‘˜",
          "tools": [code_tools],
      }
  ]

  4. å¹¶è¡Œå·¥ä½œæµ â­â­â­â­

  æ”¯æŒå­ä»£ç†å’Œå·¥å…·çš„å¹¶è¡Œæ‰§è¡Œï¼š

  # ä¸»ä»£ç†å¯ä»¥å¹¶è¡Œè°ƒç”¨å¤šä¸ªå­ä»£ç†å¤„ç†ä¸åŒä»»åŠ¡
  agent.invoke({
      "messages": [
          HumanMessage(content="åŒæ—¶ç ”ç©¶Aã€Bã€Cä¸‰ä¸ªä¸»é¢˜å¹¶æ±‡æ€»")
      ]
  })

  5. äººæœºåä½œå·¥ä½œæµ â­â­â­â­â­

  é€šè¿‡ä¸­æ–­æœºåˆ¶å®ç°äººç±»å®¡æ‰¹èŠ‚ç‚¹ï¼š

  agent = create_deep_agent(
      interrupt_on={
          "write_file": {"allowed_decisions": ["approve", "edit",
  "reject"]},
          "delete_file": True,  # éœ€è¦äººå·¥ç¡®è®¤
          "send_email": True,   # æ•æ„Ÿæ“ä½œéœ€è¦å®¡æ‰¹
      }
  )

  ğŸš« å®šåˆ¶é™åˆ¶

  ä¸æ”¯æŒçš„å·¥ä½œæµå®šåˆ¶ï¼š

  1. å›¾å½¢åŒ–èŠ‚ç‚¹ç¼–è¾‘ âŒ
    - æ— æ³•ç›´æ¥ä¿®æ”¹ LangGraph çš„èŠ‚ç‚¹è¿æ¥
    - æ²¡æœ‰å¯è§†åŒ–çš„å·¥ä½œæµç¼–è¾‘å™¨
  2. åº•å±‚å›¾ç»“æ„å®šåˆ¶ âŒ
    - æ— æ³•è‡ªå®šä¹‰èŠ‚ç‚¹é—´çš„æ¡ä»¶é€»è¾‘
    - æ— æ³•ä¿®æ”¹ LangGraph çš„é»˜è®¤æ‰§è¡Œæµç¨‹
  3. ä¸­é—´ä»¶é¡ºåºä¿®æ”¹ âŒ
    - é»˜è®¤ä¸­é—´ä»¶é¡ºåºå›ºå®šï¼šTodoList â†’ Filesystem â†’ SubAgent â†’ Summarization

  ğŸ› ï¸ å®é™…åº”ç”¨ç¤ºä¾‹

  ç ”ç©¶åˆ†æå·¥ä½œæµ

  # 1. æ–‡çŒ®æ”¶é›†é˜¶æ®µ
  literature_collector = {
      "name": "literature_collector",
      "description": "æ”¶é›†ç›¸å…³æ–‡çŒ®å’Œèµ„æ–™",
      "tools": [search_tool, scrape_tool],
  }

  # 2. ä¿¡æ¯ç­›é€‰é˜¶æ®µ
  information_filter = {
      "name": "information_filter",
      "description": "ç­›é€‰å’Œæ•´ç†å…³é”®ä¿¡æ¯",
      "tools": [filter_tool, organize_tool],
  }

  # 3. æŠ¥å‘Šç”Ÿæˆé˜¶æ®µ
  report_generator = {
      "name": "report_generator",
      "description": "ç”Ÿæˆç ”ç©¶æŠ¥å‘Š",
      "tools": [write_tool, format_tool],
  }

  research_agent = create_deep_agent(
      subagents=[literature_collector, information_filter,
  report_generator],
      system_prompt="éµå¾ªå­¦æœ¯ç ”ç©¶æµç¨‹ï¼šæ”¶é›†â†’ç­›é€‰â†’åˆ†æâ†’æŠ¥å‘Š"
  )

  è½¯ä»¶å¼€å‘å·¥ä½œæµ

  # éœ€æ±‚åˆ†æ â†’ è®¾è®¡ â†’ ç¼–ç  â†’ æµ‹è¯• â†’ éƒ¨ç½²
  dev_workflow = create_deep_agent(
      subagents=[
          requirements_analyst,
          system_designer,
          code_developer,
          qa_tester,
          deployment_engineer
      ],
      interrupt_on={
          "deploy_production": True  # ç”Ÿäº§éƒ¨ç½²éœ€è¦å®¡æ‰¹
      }
  )

