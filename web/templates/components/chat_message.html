<!-- ËÅäÂ§©Ê∂àÊÅØÁªÑ‰ª∂Ê®°Êùø -->

<!-- Áî®Êà∑Ê∂àÊÅØÊ®°Êùø -->
<template id="userMessageTemplate">
    <div class="message user-message" data-message-id="">
        <div class="message-content">
            <div class="message-avatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="message-body">
                <div class="message-text">
                    <!-- Áî®Êà∑Ê∂àÊÅØÂÜÖÂÆπ -->
                </div>
                <div class="message-meta">
                    <span class="message-time">
                        <i class="far fa-clock me-1"></i>
                        <span class="time-text"></span>
                    </span>
                    <div class="message-actions">
                        <button class="action-btn copy-btn" title="Â§çÂà∂Ê∂àÊÅØ">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="action-btn edit-btn" title="ÁºñËæëÊ∂àÊÅØ">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn delete-btn" title="Âà†Èô§Ê∂àÊÅØ">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<!-- AIÊ∂àÊÅØÊ®°Êùø -->
<template id="aiMessageTemplate">
    <div class="message ai-message" data-message-id="">
        <div class="message-content">
            <div class="message-avatar">
                <i class="fas fa-robot"></i>
            </div>
            <div class="message-body">
                <div class="message-header">
                    <span class="ai-name">AIDefectDetector</span>
                    <span class="model-badge" title="‰ΩøÁî®ÁöÑÊ®°Âûã">
                        <i class="fas fa-brain me-1"></i>
                        <span class="model-name">GPT-4</span>
                    </span>
                </div>
                <div class="message-text">
                    <div class="typing-indicator" id="typingIndicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div class="message-content-markdown">
                        <!-- AIÊ∂àÊÅØÂÜÖÂÆπÔºàMarkdownÊ†ºÂºèÔºâ -->
                    </div>
                </div>
                <div class="message-meta">
                    <span class="message-time">
                        <i class="far fa-clock me-1"></i>
                        <span class="time-text"></span>
                    </span>
                    <div class="message-actions">
                        <button class="action-btn copy-btn" title="Â§çÂà∂Ê∂àÊÅØ">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="action-btn regenerate-btn" title="ÈáçÊñ∞ÁîüÊàê">
                            <i class="fas fa-redo"></i>
                        </button>
                        <button class="action-btn like-btn" title="ÁÇπËµû">
                            <i class="far fa-thumbs-up"></i>
                        </button>
                        <button class="action-btn dislike-btn" title="ÁÇπË∏©">
                            <i class="far fa-thumbs-down"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<!-- Á≥ªÁªüÊ∂àÊÅØÊ®°Êùø -->
<template id="systemMessageTemplate">
    <div class="message system-message" data-message-id="">
        <div class="message-content">
            <div class="message-body">
                <div class="system-icon">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="system-text">
                    <!-- Á≥ªÁªüÊ∂àÊÅØÂÜÖÂÆπ -->
                </div>
                <div class="message-time">
                    <span class="time-text"></span>
                </div>
            </div>
        </div>
    </div>
</template>

<!-- ÈîôËØØÊ∂àÊÅØÊ®°Êùø -->
<template id="errorMessageTemplate">
    <div class="message error-message" data-message-id="">
        <div class="message-content">
            <div class="message-body">
                <div class="error-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="error-text">
                    <!-- ÈîôËØØÊ∂àÊÅØÂÜÖÂÆπ -->
                </div>
                <div class="error-details">
                    <!-- ËØ¶ÁªÜÈîôËØØ‰ø°ÊÅØ -->
                </div>
                <div class="message-actions">
                    <button class="action-btn retry-btn" title="ÈáçËØï">
                        <i class="fas fa-redo"></i>
                        ÈáçËØï
                    </button>
                    <button class="action-btn report-btn" title="Êä•ÂëäÈóÆÈ¢ò">
                        <i class="fas fa-bug"></i>
                        Êä•Âëä
                    </button>
                </div>
            </div>
        </div>
    </div>
</template>

<!-- ‰ª£Á†ÅÂùóÊ®°Êùø -->
<template id="codeBlockTemplate">
    <div class="code-block">
        <div class="code-header">
            <span class="code-language">
                <i class="fas fa-code me-1"></i>
                <span class="language-name">python</span>
            </span>
            <div class="code-actions">
                <button class="code-action-btn copy-code-btn" title="Â§çÂà∂‰ª£Á†Å">
                    <i class="fas fa-copy"></i>
                </button>
                <button class="code-action-btn explain-code-btn" title="Ëß£Èáä‰ª£Á†Å">
                    <i class="fas fa-question-circle"></i>
                </button>
                <button class="code-action-btn fix-code-btn" title="‰øÆÂ§çÂª∫ËÆÆ">
                    <i class="fas fa-tools"></i>
                </button>
            </div>
        </div>
        <div class="code-content">
            <pre><code class="language-python"></code></pre>
        </div>
    </div>
</template>

<!-- Êñá‰ª∂ÂºïÁî®Ê®°Êùø -->
<template id="fileReferenceTemplate">
    <div class="file-reference">
        <div class="file-info">
            <i class="fas fa-file-code me-2"></i>
            <span class="file-name">example.py</span>
            <span class="file-path">/src/example.py</span>
        </div>
        <div class="file-preview">
            <pre><code></code></pre>
        </div>
        <div class="file-actions">
            <button class="file-action-btn view-full-btn" title="Êü•ÁúãÂÆåÊï¥Êñá‰ª∂">
                <i class="fas fa-expand"></i>
                Êü•ÁúãÂÆåÊï¥Êñá‰ª∂
            </button>
            <button class="file-action-btn analyze-btn" title="ÂàÜÊûêÊñá‰ª∂">
                <i class="fas fa-search"></i>
                ÂàÜÊûêÊñá‰ª∂
            </button>
        </div>
    </div>
</template>

<!-- ÂàÜÊûêÁªìÊûúÊ®°Êùø -->
<template id="analysisResultTemplate">
    <div class="analysis-result">
        <div class="result-header">
            <div class="result-title">
                <i class="fas fa-chart-line me-2"></i>
                <span>ÂàÜÊûêÁªìÊûú</span>
            </div>
            <div class="result-summary">
                <span class="issue-count critical">
                    <i class="fas fa-exclamation-triangle me-1"></i>
                    <span class="count">0</span> ‰∏•Èáç
                </span>
                <span class="issue-count warning">
                    <i class="fas fa-exclamation-circle me-1"></i>
                    <span class="count">0</span> Ë≠¶Âëä
                </span>
                <span class="issue-count info">
                    <i class="fas fa-info-circle me-1"></i>
                    <span class="count">0</span> ‰ø°ÊÅØ
                </span>
            </div>
        </div>
        <div class="result-content">
            <!-- ÂàÜÊûêÁªìÊûúËØ¶ÁªÜÂÜÖÂÆπ -->
        </div>
        <div class="result-actions">
            <button class="result-action-btn view-details-btn" title="Êü•ÁúãËØ¶ÊÉÖ">
                <i class="fas fa-list me-1"></i>
                Êü•ÁúãËØ¶ÊÉÖ
            </button>
            <button class="result-action-btn export-btn" title="ÂØºÂá∫ÁªìÊûú">
                <i class="fas fa-download me-1"></i>
                ÂØºÂá∫ÁªìÊûú
            </button>
            <button class="result-action-btn fix-btn" title="ËøõÂÖ•‰øÆÂ§çÊ®°Âºè">
                <i class="fas fa-tools me-1"></i>
                ‰øÆÂ§çÂª∫ËÆÆ
            </button>
        </div>
    </div>
</template>

<!-- ÊÄùËÄÉËøáÁ®ãÊ®°Êùø -->
<template id="thinkingTemplate">
    <div class="thinking-process">
        <div class="thinking-header">
            <i class="fas fa-brain me-2"></i>
            <span>AIÊ≠£Âú®ÊÄùËÄÉ...</span>
            <button class="toggle-thinking-btn" title="Â±ïÂºÄ/Êî∂Ëµ∑">
                <i class="fas fa-chevron-down"></i>
            </button>
        </div>
        <div class="thinking-content">
            <div class="thinking-step">
                <span class="step-icon">üîç</span>
                <span class="step-text">ÂàÜÊûêÁî®Êà∑ÈúÄÊ±ÇÂíå‰∏ä‰∏ãÊñá</span>
            </div>
            <div class="thinking-step">
                <span class="step-icon">üìã</span>
                <span class="step-text">ËØÜÂà´‰ª£Á†Å‰∏≠ÁöÑÂÖ≥ÈîÆÈóÆÈ¢ò</span>
            </div>
            <div class="thinking-step">
                <span class="step-icon">üí°</span>
                <span class="step-text">ÁîüÊàêÂàÜÊûêÂíåÂª∫ËÆÆ</span>
            </div>
        </div>
    </div>
</template>

<!-- ÂºïÁî®Ê∂àÊÅØÊ®°Êùø -->
<template id="quotedMessageTemplate">
    <div class="quoted-message">
        <div class="quote-header">
            <i class="fas fa-quote-left me-2"></i>
            <span class="quote-author">ÂºïÁî®Ê∂àÊÅØ</span>
            <span class="quote-time"></span>
        </div>
        <div class="quote-content">
            <!-- ÂºïÁî®ÁöÑÊ∂àÊÅØÂÜÖÂÆπ -->
        </div>
    </div>
</template>

<!-- Ê∂àÊÅØÂàÜÈöîÁ¨¶Ê®°Êùø -->
<template id="messageSeparatorTemplate">
    <div class="message-separator">
        <div class="separator-line"></div>
        <div class="separator-text">
            <span class="separator-date"></span>
        </div>
        <div class="separator-line"></div>
    </div>
</template>

<!-- Âä†ËΩΩÊõ¥Â§öÊ∂àÊÅØÊ®°Êùø -->
<template id="loadMoreTemplate">
    <div class="load-more-messages">
        <button class="load-more-btn" id="loadMoreBtn">
            <i class="fas fa-spinner fa-spin me-2"></i>
            Âä†ËΩΩÊõ¥Â§öÊ∂àÊÅØ
        </button>
    </div>
</template>

<!-- ÊµÅÂºèÂìçÂ∫îÂä†ËΩΩÊ®°Êùø -->
<template id="streamingResponseTemplate">
    <div class="streaming-response">
        <div class="streaming-indicator">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
        <div class="streaming-text">
            Ê≠£Âú®ÁîüÊàêÂõûÂ§ç...
        </div>
        <button class="stop-streaming-btn" id="stopStreamingBtn" title="ÂÅúÊ≠¢ÁîüÊàê">
            <i class="fas fa-stop"></i>
            ÂÅúÊ≠¢
        </button>
    </div>
</template>